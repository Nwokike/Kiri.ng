/* static/css/custom.css
   Improved, semantic, accessible, and backwards-compatible.
   - Preserves original variables (for compatibility),
   - Adds semantic tokens and systemized styles,
   - Integrates Google Translate glass/ash final design,
   - Adds focus/keyboard accessibility & reduced-motion support.
*/

/* ===========================
   Base: Original color tokens
   =========================== */
:root{
  --primary-green: #2c5530;
  --secondary-green: #3d7242;
  --accent-gold: #d4af37;

  --light-bg: #f8f9fa;
  --light-card: #ffffff;
  --light-text: #212529;
  --light-muted: #6c757d;
  --light-border: #dee2e6;
  --active-bg: rgba(44,85,48,0.1);
  --hover-bg: rgba(44,85,48,0.05);

  /* semantic tokens (map to above by default for compatibility) */
  --surface: var(--light-card);
  --surface-2: #f6f7f8;
  --bg: var(--light-bg);
  --text: var(--light-text);
  --muted: var(--light-muted);
  --border: var(--light-border);
  --accent: var(--primary-green);
  --accent-2: var(--secondary-green);

  /* sizes & scale (easy to tweak) */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius: 12px;
  --radius-lg: 16px;
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;

  /* shadows */
  --shadow-xs: 0 1px 2px rgba(0,0,0,0.04);
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.12);

  /* focus ring */
  --focus-ring: 0 0 0 3px rgba(44,85,48,0.12);
  --transition-fast: 0.18s ease;
}

/* Dark theme remapping (keeps original var names so nothing breaks) */
[data-theme="dark"]{
  --primary-green: #4a8f52;
  --secondary-green: #5fa867;
  --accent-gold: #f0c952;

  --light-bg: #0a0a0a;
  --light-card: #1a1a1a;
  --light-text: #e8e8e8;
  --light-muted: #a0a0a0;
  --light-border: #333333;
  --active-bg: rgba(74,143,82,0.2);
  --hover-bg: rgba(74,143,82,0.1);

  /* semantic mappings */
  --surface: var(--light-card);
  --surface-2: #121212;
  --bg: var(--light-bg);
  --text: var(--light-text);
  --muted: var(--light-muted);
  --border: var(--light-border);

  --shadow-xs: 0 1px 2px rgba(0,0,0,0.35);
  --shadow-sm: 0 2px 6px rgba(0,0,0,0.45);
  --shadow-md: 0 4px 10px rgba(0,0,0,0.5);

  --focus-ring: 0 0 0 3px rgba(74,143,82,0.12);
}

/* ===========================
   Global reset & accessibility
   =========================== */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  line-height: 1.45;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color var(--transition-fast), color var(--transition-fast);
  padding-top: 140px; /* preserved from original */
  padding-bottom: 80px;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}

/* improved focus for keyboard users */
:focus { outline: none; }
:focus-visible {
  box-shadow: var(--focus-ring);
  border-radius: var(--radius-sm);
  outline: none;
}

/* small utilities */
.sr-only{ position: absolute !important; width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0; }

/* ===========================
   Dropdowns, tooltips & global components
   =========================== */
.dropdown-menu {
  z-index: 1050;
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  min-width: 220px;
}

.dropdown-item {
  color: var(--text);
  padding: .5rem .75rem;
  transition: background-color var(--transition-fast);
}

.dropdown-item:hover{ background: var(--hover-bg); }

/* ===========================
   Cards
   =========================== */
.card {
  background: var(--surface);
  border: none;
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  overflow: hidden;
  animation: fadeIn 0.3s ease-out;
}
.card:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }

.card-header {
  background: var(--surface);
  border-bottom: 2px solid var(--accent);
  font-weight: 600;
  color: var(--text);
  padding: .75rem 1rem;
}

.alert {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
}

/* ===========================
   Header / logo
   =========================== */
#main-header {
  background: var(--surface) !important;
  border-bottom: 1px solid var(--border) !important;
  box-shadow: var(--shadow-xs);
  transition: background-color var(--transition-fast), border-color var(--transition-fast);
}

/* logo images are present in DOM; keep display toggles */
.logo-light, .logo-dark{ display:inline-block; height:60px; max-width:180px; object-fit:contain; }
.logo-dark{ display:none; }
[data-theme="dark"] .logo-light{ display:none; }
[data-theme="dark"] .logo-dark{ display:inline-block !important; }

/* ===========================
   Bottom nav (mobile PWA)
   =========================== */
.navbar.fixed-bottom {
  background: var(--surface) !important;
  border-top: 2px solid var(--border);
  box-shadow: 0 -2px 8px rgba(0,0,0,0.06);
}

.bottom-nav-item {
  color: var(--muted);
  transition: color 0.2s ease, background 0.2s ease;
  position: relative;
  padding: .5rem 1rem;
  border-radius: var(--radius-md);
  text-align:center;
}
.bottom-nav-item:hover { background: var(--hover-bg); color: var(--accent); }
.bottom-nav-item.active, .bottom-nav-item.text-primary {
  color: var(--accent) !important;
  background: var(--active-bg);
  font-weight: 600;
}
.bottom-nav-item.active::before {
  content: ""; position:absolute; top:0; left:50%; transform:translateX(-50%); width:60%; height:3px; background:var(--accent); border-radius:0 0 3px 3px;
}

/* ===========================
   Navigation tabs
   =========================== */
#sub-header-container { background: var(--surface); border-bottom: 1px solid var(--border); }
.nav-tabs .nav-link {
  color: var(--muted);
  border: none;
  padding:.75rem 1.25rem;
  transition: color .18s ease, background .18s ease;
}
.nav-tabs .nav-link:hover{ background: var(--hover-bg); color: var(--accent); }
.nav-tabs .nav-link.active { color: var(--accent) !important; background: var(--active-bg); font-weight:600; border-bottom:3px solid var(--accent); }

/* ===========================
   Buttons
   =========================== */
.btn { border-radius: var(--radius-md); transition: all .12s ease; }
.btn-primary{
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}
.btn-primary:hover { background: var(--accent-2); border-color: var(--accent-2); transform: translateY(-1px); box-shadow: 0 6px 14px rgba(44,85,48,0.12); }
.btn-outline-primary { border-color: var(--accent); color: var(--accent); }
.btn-outline-primary:hover { background: var(--accent); color: #fff; }

/* Success */
.btn-success { background: var(--accent-2); border-color: var(--accent-2); }
.btn-success:hover { background: var(--accent); border-color: var(--accent); }

/* ===========================
   Badges
   =========================== */
.badge { font-weight:500; padding:.35em .65em; border-radius: 999px; }

/* ===========================
   Form controls (inputs, selects, textarea)
   =========================== */
input, textarea, select, .form-control {
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  padding: .5rem .75rem;
  border-radius: var(--radius-md);
  transition: box-shadow .12s ease, border-color .12s ease, background-color .18s ease, color .18s ease;
}
input:focus, textarea:focus, select:focus, .form-control:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: var(--focus-ring);
}

/* placeholders */
input::placeholder, textarea::placeholder { color: var(--muted); opacity: .85; }

/* ===========================
   Back button (preserve your class)
   =========================== */
.back-btn {
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--text);
  padding:.35rem .5rem;
  border-radius: var(--radius-md);
}

/* ===========================
   Google Translate (final glass/ash style)
   - compact pre-click box under logo
   - glass dropdown (dark mode translucent ash)
   - fallback .goog-te-combo preserved
   =========================== */

/* container */
#google_translate_element{ text-align:center; margin-top:6px; font-family:inherit; }

/* pre-click compact box */
#google_translate_element .goog-te-gadget-simple{
  background: #ffffff !important;           /* always light-ish so text remains black */
  border: 1px solid #d0d0d0 !important;
  border-radius: var(--radius-sm) !important;
  padding: 4px 8px !important;
  font-size: 0.75rem !important;
  color: #000000 !important;
  display:inline-flex !important;
  align-items:center !important;
  gap:6px !important;
  cursor:pointer !important;
  transition: background .18s ease, box-shadow .18s ease;
  box-shadow: var(--shadow-xs);
}

/* hide google logo that sometimes appears */
#google_translate_element .goog-te-gadget-icon{ display:none !important; }

/* menu text */
#google_translate_element .goog-te-menu-value,
#google_translate_element .goog-te-menu-value span{ color:#000 !important; font-weight:500 !important; }

/* hover on the compact box */
#google_translate_element .goog-te-gadget-simple:hover{ background:#f6f6f6 !important; }

/* dark-mode pre-click: gentle translucent ash (soft, not glaring) */
[data-theme="dark"] #google_translate_element .goog-te-gadget-simple{
  background: rgba(240,240,240,0.94) !important; /* soft ash glass */
  border: 1px solid rgba(200,200,200,0.45) !important;
  color: #000 !important;
  backdrop-filter: blur(4px);
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
}

/* Fallbacks for select-style render (combo) */
.goog-te-combo{
  background: var(--surface) !important;
  color: var(--accent) !important;
  border: 2px solid var(--accent) !important;
  border-radius: 6px !important;
  padding: 6px 8px !important;
  font-weight:600 !important;
}
.goog-te-combo option{ background: var(--surface) !important; color:var(--accent) !important; }

/* main dropdown: container iframe - make transparent and style inner .goog-te-menu2 */
iframe.goog-te-menu-frame{ background: transparent !important; border:none !important; box-shadow:none !important; }

/* inner list: styled box */
.goog-te-menu2{
  background: #ffffff !important;
  border-radius: var(--radius-md) !important;
  border: 1px solid #cfcfcf !important;
  overflow: hidden !important;
  box-shadow: var(--shadow-md) !important;
}

/* dark-mode dropdown glass effect */
[data-theme="dark"] .goog-te-menu2{
  background: rgba(240,240,240,0.93) !important;
  border: 1px solid rgba(200,200,200,0.4) !important;
  backdrop-filter: blur(6px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.35) !important;
}

/* dropdown items */
.goog-te-menu2-item div,
.goog-te-menu2-item:link div,
.goog-te-menu2-item:visited div{
  color: #000 !important;
  background: transparent !important;
  font-size: 0.86rem !important;
  padding: 8px 12px !important;
  white-space: nowrap;
}
.goog-te-menu2-item:hover div{ background: rgba(220,220,220,0.7) !important; color: #000 !important; }

/* hide global translate overlay */
.skiptranslate iframe{ display:none !important; }
body.skiptranslate{ top:0 !important; }

/* ===========================
   CKEditor / markdown / blog content (preserved but tuned)
   =========================== */
.markdown-content table{ width:100%; margin-bottom:1rem; color:var(--text); border-color:var(--border); }
.markdown-content th, .markdown-content td{ padding:.75rem; border-bottom:1px solid var(--border); }
.markdown-content thead{ background: var(--hover-bg); }
.markdown-content img{ max-width:100%; height:auto; border-radius: var(--radius-md); }

/* ckeditor editable block */
.ck-editor__editable_inline{
  border:1px solid var(--border) !important;
  border-radius: var(--radius-md) !important;
  padding:1rem !important;
  min-height:250px;
  background: var(--surface) !important;
  color: var(--text) !important;
}

/* ===========================
   Images & utility classes (preserved)
   =========================== */
.profile-picture-lg{ width:150px; height:150px; object-fit:cover; border:3px solid var(--accent); border-radius:50%; }
.profile-picture-sm{ width:50px; height:50px; object-fit:cover; border-radius:var(--radius-md); }
.card-img-top-custom{ height:200px; object-fit:cover; }
.service-detail-img{ height:150px; object-fit:cover; }
.post-header-image{ width:100%; max-height:400px; object-fit:cover; border-radius:var(--radius-md); }
.post-list-image{ max-height:250px; object-fit:cover; }

/* ===========================
   Dark-mode overrides (kept & simplified)
   =========================== */
[data-theme="dark"] #main-header,
[data-theme="dark"] footer,
[data-theme="dark"] .navbar{
  background: var(--surface) !important;
  border-color: var(--border) !important;
}
[data-theme="dark"] .text-muted{ color: var(--muted) !important; }
[data-theme="dark"] .list-group-item,
[data-theme="dark"] .modal-content,
[data-theme="dark"] .pagination .page-link{
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text) !important;
}

/* tables, forms, elements */
[data-theme="dark"] table, [data-theme="dark"] .table{ color: var(--text) !important; border-color: var(--border) !important; }
[data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd){ background: rgba(255,255,255,0.02) !important; }

/* modal / close button */
[data-theme="dark"] .btn-close{ filter: invert(1) grayscale(100%) brightness(200%); }

/* ===========================
   Links / footer / misc
   =========================== */
a{ color: var(--accent); text-decoration: none; transition: color .18s ease; }
a:hover{ color: var(--accent-2); }
footer a{ color: var(--accent); }
footer a:hover{ color: var(--accent-2); }

/* ===========================
   PWA install button (preserved)
   =========================== */
.pwa-install-button{
  position:fixed; bottom:100px; right:20px; z-index:1000;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color:#fff; border:none; padding:12px 24px; border-radius:50px; font-weight:600;
  font-size:.95rem; box-shadow: 0 4px 12px rgba(44,85,48,0.3); cursor:pointer; display:flex; gap:8px; align-items:center;
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.pwa-install-button:hover{ transform: translateY(-2px); box-shadow: 0 6px 18px rgba(44,85,48,0.38); background: linear-gradient(135deg, var(--accent-2), var(--accent)); }
@media (max-width:768px){ .pwa-install-button{ bottom:90px; right:15px; padding:10px 20px; font-size:.85rem; } }

/* ===========================
   Small responsive tweaks preserved
   =========================== */
@media (max-width:768px){
  body{ padding-top:130px; }
  .card{ margin-bottom:1rem; }
  .bottom-nav-item{ padding:.5rem .5rem; }
}

/* ===========================
   Transitions & animation helper
   =========================== */
@keyframes fadeIn{ from{ opacity:0; transform: translateY(10px);} to{ opacity:1; transform:translateY(0);} }

/* ===========================
   Legacy google combo fallback (kept safe)
   =========================== */
.goog-te-combo{ background: var(--surface) !important; color: var(--accent) !important; border: 2px solid var(--accent) !important; border-radius:6px !important; padding:6px 8px !important; font-weight:600 !important; }
.goog-te-combo option{ background: var(--surface) !important; color: var(--accent) !important; }

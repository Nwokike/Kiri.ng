/* static/css/custom.css
   Refined for maximum readability, consistency, and maintainability.
   - Leverages a layered token system (raw values -> semantic tokens).
   - Enforces a one-property-per-line format for clarity.
   - Centralizes interactive transitions for a consistent user experience.
   - Consolidates all dark mode overrides into a single, scoped block.
*/

/* ===========================
   1. Design Token System
   =========================== */
:root {
  /* RAW COLOR VALUES (Light Theme) */
  --green-primary-raw: #2c5530;
  --green-secondary-raw: #3d7242;
  --gold-accent-raw: #d4af37;
  --bg-raw: #f8f9fa;
  --surface-raw: #ffffff;
  --text-raw: #212529;
  --muted-raw: #6c757d;
  --border-raw: #dee2e6;
  --active-bg-raw: rgba(44, 85, 48, 0.1);
  --hover-bg-raw: rgba(44, 85, 48, 0.05);

  /* SEMANTIC TOKENS (Used throughout the app) */
  --bg: var(--bg-raw);
  --surface: var(--surface-raw);
  --surface-2: #f6f7f8;
  --text: var(--text-raw);
  --muted: var(--muted-raw);
  --border: var(--border-raw);
  --accent: var(--green-primary-raw);
  --accent-2: var(--green-secondary-raw);
  --active-bg: var(--active-bg-raw);
  --hover-bg: var(--hover-bg-raw);

  /* SIZING & SCALE */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-pill: 999px;
  --radius-round: 50%;

  /* SPACING */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;

  /* SHADOWS */
  --shadow-xs: 0 1px 2px rgba(0,0,0,0.04);
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.12);

  /* TYPOGRAPHY & TRANSITIONS */
  --font-stack-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --transition-fast: 0.18s ease;
  --transition-base: 0.2s ease;
  --transition-interactive: all 0.15s ease-in-out;
  --focus-ring: 0 0 0 3px rgba(44,85,48,0.12);
}

/* Dark theme remapping (only raw values need to change) */
[data-theme="dark"] {
  --green-primary-raw: #4a8f52;
  --green-secondary-raw: #5fa867;
  --gold-accent-raw: #f0c952;
  --bg-raw: #0a0a0a;
  --surface-raw: #1a1a1a;
  --text-raw: #e8e8e8;
  --muted-raw: #a0a0a0;
  --border-raw: #333333;
  --active-bg-raw: rgba(74, 143, 82, 0.2);
  --hover-bg-raw: rgba(74, 143, 82, 0.1);

  --surface-2: #121212;
  --shadow-xs: 0 1px 2px rgba(0,0,0,0.35);
  --shadow-sm: 0 2px 6px rgba(0,0,0,0.45);
  --shadow-md: 0 4px 10px rgba(0,0,0,0.5);
  --focus-ring: 0 0 0 3px rgba(74,143,82,0.12);
}

/* ===========================
   2. Global Reset & Accessibility
   =========================== */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-stack-system);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color var(--transition-fast), color var(--transition-fast);
  padding-top: 140px;
  padding-bottom: 80px;
}

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}

/*
  Improved focus for keyboard users without disrupting mouse users.
  :focus-visible is a pseudo-class that applies only when the browser
  determines the focus indicator should be visible (e.g., keyboard navigation).
*/
:focus:not(:focus-visible) {
  outline: none;
}
:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
  border-radius: var(--radius-sm);
}

/* Screen-reader only utility */
.sr-only {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  white-space: nowrap;
  border: 0;
}

/* ===========================
   3. Core Components
   =========================== */
.dropdown-menu {
  z-index: 1050;
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  min-width: 220px;
}

.dropdown-item {
  color: var(--text);
  padding: var(--space-sm) 12px;
  transition: var(--transition-interactive);
}
.dropdown-item:hover {
  background: var(--hover-bg);
}

.card {
  background: var(--surface);
  border: none;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  transition: transform var(--transition-base), box-shadow var(--transition-base);
  overflow: hidden;
  animation: fadeIn 0.3s ease-out;
}
.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-md);
}

.card-header {
  background: var(--surface);
  border-bottom: 2px solid var(--accent);
  font-weight: 600;
  color: var(--text);
  padding: 12px var(--space-md);
}

.alert {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
}

/* ===========================
   4. Layout & Navigation
   =========================== */
#main-header {
  background: var(--surface) !important;
  border-bottom: 1px solid var(--border) !important;
  box-shadow: var(--shadow-xs);
  transition: background-color var(--transition-fast), border-color var(--transition-fast);
}

.logo-light,
.logo-dark {
  display: inline-block;
  height: 60px;
  max-width: 180px;
  object-fit: contain;
}
.logo-dark {
  display: none;
}

.navbar.fixed-bottom {
  background: var(--surface) !important;
  border-top: 2px solid var(--border);
  box-shadow: 0 -2px 8px rgba(0,0,0,0.06);
}

.bottom-nav-item {
  position: relative;
  text-align: center;
  color: var(--muted);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  transition: var(--transition-interactive);
}
.bottom-nav-item:hover {
  background: var(--hover-bg);
  color: var(--accent);
}
.bottom-nav-item.active,
.bottom-nav-item.text-primary {
  color: var(--accent) !important;
  background: var(--active-bg);
  font-weight: 600;
}
.bottom-nav-item.active::before {
  content: "";
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 60%;
  height: 3px;
  background: var(--accent);
  border-radius: 0 0 3px 3px;
}

#sub-header-container {
  background: var(--surface);
  border-bottom: 1px solid var(--border);
}

.nav-tabs .nav-link {
  color: var(--muted);
  border: none;
  padding: 12px 20px;
  transition: var(--transition-interactive);
}
.nav-tabs .nav-link:hover {
  background: var(--hover-bg);
  color: var(--accent);
}
.nav-tabs .nav-link.active {
  color: var(--accent) !important;
  background: var(--active-bg);
  font-weight: 600;
  border-bottom: 3px solid var(--accent);
}

/* ===========================
   5. Buttons, Forms & Badges
   =========================== */
.btn {
  border-radius: var(--radius-md);
  transition: var(--transition-interactive);
}
.btn-primary {
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}
.btn-primary:hover {
  background: var(--accent-2);
  border-color: var(--accent-2);
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(44,85,48,0.12);
}
.btn-outline-primary {
  border-color: var(--accent);
  color: var(--accent);
}
.btn-outline-primary:hover {
  background: var(--accent);
  color: #fff;
}
.btn-success {
  background: var(--accent-2);
  border-color: var(--accent-2);
}
.btn-success:hover {
  background: var(--accent);
  border-color: var(--accent);
}

.badge {
  font-weight: 500;
  padding: .35em .65em;
  border-radius: var(--radius-pill);
}

.form-control,
input,
textarea,
select {
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  padding: var(--space-sm) 12px;
  border-radius: var(--radius-md);
  transition: box-shadow .12s ease, border-color .12s ease, background-color var(--transition-fast), color var(--transition-fast);
}
.form-control:focus,
input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: var(--focus-ring);
}
input::placeholder,
textarea::placeholder {
  color: var(--muted);
  opacity: .85;
}

.back-btn {
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--text);
  padding: .35rem .5rem;
  border-radius: var(--radius-md);
  transition: var(--transition-interactive);
}

/* ===========================
   6. Third-Party Widgets
   =========================== */
/* Google Translate */
#google_translate_element {
  text-align: center;
  margin-top: 6px;
  font-family: inherit;
}
#google_translate_element .goog-te-gadget-simple {
  background: #ffffff !important;
  border: 1px solid #d0d0d0 !important;
  border-radius: var(--radius-sm) !important;
  padding: 4px 8px !important;
  font-size: 0.75rem !important;
  color: #000 !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 6px !important;
  cursor: pointer !important;
  transition: background var(--transition-fast), box-shadow var(--transition-fast);
  box-shadow: var(--shadow-xs);
}
#google_translate_element .goog-te-gadget-icon {
  display: none !important;
}
#google_translate_element .goog-te-menu-value span {
  color: #000 !important;
  font-weight: 500 !important;
}
#google_translate_element .goog-te-gadget-simple:hover {
  background: #f6f6f6 !important;
}

iframe.goog-te-menu-frame {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}
.goog-te-menu2 {
  background: #ffffff !important;
  border-radius: var(--radius-md) !important;
  border: 1px solid #cfcfcf !important;
  overflow: hidden !important;
  box-shadow: var(--shadow-md) !important;
}
.goog-te-menu2-item div {
  color: #000 !important;
  background: transparent !important;
  font-size: 0.86rem !important;
  padding: 8px 12px !important;
  white-space: nowrap;
}
.goog-te-menu2-item:hover div {
  background: rgba(220,220,220,0.7) !important;
}
.skiptranslate iframe {
  display: none !important;
}
body.skiptranslate {
  top: 0 !important;
}

/* CKEditor & Markdown */
.markdown-content table {
  width: 100%;
  margin-bottom: 1rem;
  color: var(--text);
  border-color: var(--border);
}
.markdown-content th,
.markdown-content td {
  padding: .75rem;
  border-bottom: 1px solid var(--border);
}
.markdown-content thead {
  background: var(--hover-bg);
}
.markdown-content img {
  max-width: 100%;
  height: auto;
  border-radius: var(--radius-md);
}
.ck-editor__editable_inline {
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-md) !important;
  padding: var(--space-md) !important;
  min-height: 250px;
  background: var(--surface) !important;
  color: var(--text) !important;
}

/* ===========================
   7. Images & Utilities
   =========================== */
.profile-picture-lg {
  width: 150px;
  height: 150px;
  object-fit: cover;
  border: 3px solid var(--accent);
  border-radius: var(--radius-round);
}
.profile-picture-sm {
  width: 50px;
  height: 50px;
  object-fit: cover;
  border-radius: var(--radius-md);
}
.card-img-top-custom,
.service-detail-img,
.post-header-image,
.post-list-image {
  object-fit: cover;
}
.card-img-top-custom { height: 200px; }
.service-detail-img { height: 150px; }
.post-header-image { width: 100%; max-height: 400px; border-radius: var(--radius-md); }
.post-list-image { max-height: 250px; }

.pwa-install-button {
  position: fixed;
  bottom: 100px;
  right: 20px;
  z-index: 1000;
  display: flex;
  gap: 8px;
  align-items: center;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color: #fff;
  border: none;
  padding: 12px 24px;
  border-radius: var(--radius-pill);
  font-weight: 600;
  font-size: .95rem;
  box-shadow: 0 4px 12px rgba(44,85,48,0.3);
  cursor: pointer;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
}
.pwa-install-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(44,85,48,0.38);
  background: linear-gradient(135deg, var(--accent-2), var(--accent));
}

/* ===========================
   8. Links & Footer
   =========================== */
a {
  color: var(--accent);
  text-decoration: none;
  transition: var(--transition-interactive);
}
a:hover {
  color: var(--accent-2);
}

footer a {
  color: var(--accent);
}
footer a:hover {
  color: var(--accent-2);
}

/* ===========================
   9. Animations
   =========================== */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===========================
   10. Dark Mode Overrides
   =========================== */
[data-theme="dark"] .logo-light {
  display: none;
}
[data-theme="dark"] .logo-dark {
  display: inline-block !important;
}
[data-theme="dark"] #google_translate_element .goog-te-gadget-simple {
  background: rgba(240,240,240,0.94) !important;
  border: 1px solid rgba(200,200,200,0.45) !important;
  color: #000 !important;
  backdrop-filter: blur(4px);
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
}
[data-theme="dark"] .goog-te-menu2 {
  background: rgba(240,240,240,0.93) !important;
  border: 1px solid rgba(200,200,200,0.4) !important;
  backdrop-filter: blur(6px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.35) !important;
}
[data-theme="dark"] .text-muted {
  color: var(--muted) !important;
}
[data-theme="dark"] .list-group-item,
[data-theme="dark"] .modal-content,
[data-theme="dark"] .pagination .page-link {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text) !important;
}
[data-theme="dark"] .table,
[data-theme="dark"] table {
  color: var(--text) !important;
  border-color: var(--border) !important;
}
[data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) {
  background: rgba(255,255,255,0.02) !important;
}
[data-theme="dark"] .btn-close {
  filter: invert(1) grayscale(100%) brightness(200%);
}

/* ===========================
   11. Responsive Design
   =========================== */
@media (max-width: 768px) {
  body {
    padding-top: 130px;
  }
  .card {
    margin-bottom: var(--space-md);
  }
  .bottom-nav-item {
    padding: var(--space-sm);
  }
  .pwa-install-button {
    bottom: 90px;
    right: 15px;
    padding: 10px 20px;
    font-size: .85rem;
  }
}
